<?xml version="1.0" encoding="UTF-8"?>

<config>

   <var-def name="MaxPage">
            <xpath expression="//div[@class='cat_nav top']/div[@class='b']/a[last()]/text()">
                <html-to-xml>
                    <http url="http://www.citilink.ru/catalog/computers_and_notebooks/notebooks/"/>
                </html-to-xml>
            </xpath>
    </var-def>
   
   
    <while condition="${MaxPage.toInt() + 1>i.toInt()}" index="i"><empty>
        <var-def name="ProductsURL">
            <xpath expression='//table[@class = "item"]'>
                <html-to-xml>
                    <http url="http://www.citilink.ru/catalog/computers_and_notebooks/notebooks/?p=${i.toInt()}"/>
                </html-to-xml>
            </xpath>
        </var-def>

        	<loop item="oneNew" index="j">
            <list>
                <xpath expression='//td[@class="l"]/*//@href'>
           			 <html-to-xml>
            		    <var name="ProductsURL"/>
           			 </html-to-xml>
        		</xpath>
            </list>
            <body><empty>
                <var-def name="oneNewURL">
                    <html-to-xml>
                        <http url="http://www.citilink.ru${oneNew}?opinion"/>
                    </html-to-xml>
                </var-def>

                <var-def name="ProductName">
                    <xpath expression='//div[@class="item-inner"]/h1[1]/text()'>
                        <var name="oneNewURL"/>
                    </xpath>
                </var-def>
                
              <var-def name = "Price">
            	<xpath expression='//div[@class="price"]/text()'>
           				<html-to-xml>
            		    	<var name = "oneNewURL"/>
           				</html-to-xml>
        		</xpath>
        		</var-def>
        		
        		
        		<loop item="review" index="j">
            	<list>
            		<xpath expression='//div[@class="opinion row1"]'>
           				 <html-to-xml>
            			    <var name="oneNewURL"/>
           				 </html-to-xml>
        			</xpath>
				</list>
				
            	<body><empty>
            	
            
            	<var-def name = "ReviewTime">
            		<xpath expression="//*[@class='l']/p[@class='d']/text()">
            		    	<var name = "review"/>
        			</xpath>
        		</var-def>
        		
        		
        		<var-def name = "StarRate">
            		<xpath expression="//*[@class='m']/p[1]/img/@alt">
            		    	<var name = "review"/>
        			</xpath>
        		</var-def>
        		
        		<var-def name = "Description">
            		<xpath expression="//*[@class='m']/p[1]/b/text()">
            		    	<var name = "review"/>
        			</xpath>
        		</var-def>
            		
            	<var-def name = "GoodFeatures">
            		<xpath expression="//*[@class='m']/p[2]">
            		    	<var name = "review"/>
           			</xpath>
        		</var-def>
        		
        		<var-def name = "BadFeatures">
            		<xpath expression="//*[@class='m']/p[3]">
           			    	<var name = "review"/>
           			</xpath>
        		</var-def>
        		
        		<var-def name = "Comments">
            		<xpath expression="//*[@class='m']/p[4]">
           			    	<var name = "review"/>
           			</xpath>
        		</var-def>
        		
        		<var-def name = "VoteYes">
            		<xpath expression="//*[@class='vote']/p/span[3]/text()">
           			    	<var name = "review"/>
           			</xpath>
        		</var-def>
        		
        		<var-def name = "VoteNo">
            		<xpath expression="//*[@class='vote']/p/span[6]/text()">
           			    	<var name = "review"/>
           			</xpath>
        		</var-def>
            		
                	</empty>
                </body>
                </loop>    		

            </empty></body>
        </loop>
    </empty></while>


</config>